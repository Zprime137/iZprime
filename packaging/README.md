# Packaging and Release Notes

This directory contains release-facing metadata and conventions for iZprime.

## Repository layout

- `packaging/izprime.pc.in`: pkg-config template used by `make install`.
- `packaging/debian/`: Debian/Ubuntu package metadata (`debhelper` flow).
- `packaging/rpm/izprime.spec`: RPM spec for Fedora/COPR-style builds.
- `packaging/homebrew/`: Homebrew formula template and generation notes.
- `packaging/windows/`: Windows packaging notes and winget manifest template.

## Dependency policy

- Default distribution uses **dynamic linking** for third-party dependencies:
  - GMP
  - OpenSSL
- Rationale:
  - smaller artifacts,
  - cleaner security patch flow through system package updates,
  - simpler maintenance across macOS/Linux.

## Library versioning policy

- Project version: `VERSION` (semantic version, e.g. `1.0.0`)
- ABI version: `SOVERSION` (major ABI number, default = `VERSION` major)

Shared library names follow common conventions:

- Linux:
  - `libizprime.so.<VERSION>`
  - `libizprime.so.<SOVERSION>`
  - `libizprime.so`
- macOS:
  - `libizprime.<VERSION>.dylib`
  - `libizprime.<SOVERSION>.dylib`
  - `libizprime.dylib`

## pkg-config metadata

- Template: `packaging/izprime.pc.in`
- Installed file: `izprime.pc`
- Generated by Make during `install` / `install-lib`.

## Release workflow (maintainer)

1. Verify toolchain and deps:
   - `make doctor`
2. Build and validate:
   - `make clean`
   - `make cli`
   - `make test-all`
3. Build docs:
   - `make userManual`
4. Create source artifact:
   - `make dist VERSION=1.0.0`
5. Optionally stage install:
   - `make install DESTDIR=/tmp/izprime-stage PREFIX=/usr/local`

Artifacts are emitted under `dist/`.

## Distribution channels

- macOS: Homebrew tap (formula generated from `packaging/homebrew/izprime.rb.in`)
- Debian/Ubuntu: `debuild` using files under `packaging/debian/`
- Fedora/RHEL: `rpmbuild` with `packaging/rpm/izprime.spec`
- Windows: MSYS2 build + portable ZIP + winget manifest
